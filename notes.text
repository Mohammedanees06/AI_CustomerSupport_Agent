FRONTEND (React + Tailwind + Redux)

client/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ widget.js
â”‚      // Chat widget script that businesses embed on their website
â”‚      // This connects to our backend and opens the AI chat
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”‚   // Main React component
â”‚   â”‚   â”‚   // Loads routes and global providers
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes.jsx
â”‚   â”‚   â”‚   // All application routes in one file
â”‚   â”‚   â”‚   // Example: /login, /dashboard, /chat
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ providers.jsx
â”‚   â”‚       // Wraps app with Redux, Socket, and Language providers
â”‚
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   // Creates Redux store using Redux Toolkit
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth.slice.js
â”‚   â”‚   â”‚   // Stores login user, token, business info
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat.slice.js
â”‚   â”‚   â”‚   // Stores chat messages, active conversation, unread count
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ voice.slice.js
â”‚   â”‚   â”‚   // Stores voice call state (ringing, active, muted)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ app.slice.js
â”‚   â”‚       // Stores app-wide settings (theme, language, alerts)
â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”‚   â”‚   â”‚   // Reusable button component
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.jsx
â”‚   â”‚   â”‚   â”‚   // Reusable popup/modal
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Loader.jsx
â”‚   â”‚   â”‚       // Loading spinner
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatBox.jsx
â”‚   â”‚   â”‚   â”‚   // Main chat UI container
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Message.jsx
â”‚   â”‚   â”‚   â”‚   // Single chat message bubble
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ VoiceButton.jsx
â”‚   â”‚   â”‚       // Button to start or stop AI voice call
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ dashboard/
â”‚   â”‚       â”œâ”€â”€ StatsCard.jsx
â”‚   â”‚       â”‚   // Shows analytics numbers
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ Chart.jsx
â”‚   â”‚           // Displays graphs (calls, chats, usage)
â”‚
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.api.js
â”‚   â”‚   â”‚   â”‚   // All login/signup API calls
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ auth.thunks.js
â”‚   â”‚   â”‚       // Async Redux actions for auth
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.api.js
â”‚   â”‚   â”‚   â”‚   // Chat-related API calls
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.socket.js
â”‚   â”‚   â”‚   â”‚   // WebSocket events (send/receive messages)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ chat.thunks.js
â”‚   â”‚   â”‚       // Async chat actions
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ voice/
â”‚   â”‚   â”‚   â”œâ”€â”€ voice.api.js
â”‚   â”‚   â”‚   â”‚   // Voice call API calls
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ voice.thunks.js
â”‚   â”‚   â”‚       // Async voice actions
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ analytics/
â”‚   â”‚       â””â”€â”€ analytics.api.js
â”‚   â”‚           // Fetch dashboard analytics data
â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useAuth.js
â”‚   â”‚   â”‚   // Custom hook for auth logic
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ useSocket.js
â”‚   â”‚   â”‚   // Handles socket connection and cleanup
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ useVoice.js
â”‚   â”‚       // Handles microphone and audio stream
â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ apiClient.js
â”‚   â”‚   â”‚   // Axios setup with base URL and headers
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ socketClient.js
â”‚   â”‚   â”‚   // Creates socket connection once
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ i18n.js
â”‚   â”‚       // Language translation setup
â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ constants.js
â”‚   â”‚   â”‚   // Fixed values (roles, limits)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ formatters.js
â”‚   â”‚   â”‚   // Format dates, currency, phone numbers
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ validators.js
â”‚   â”‚       // Input validation helpers
â”‚
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ index.css
â”‚   â”‚       // Global Tailwind styles
â”‚
â”‚   â””â”€â”€ main.jsx
â”‚       // React entry point
â”‚
â””â”€â”€ package.json


BACKEND (Node + Express + Redis + AI)
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.js
â”‚   â”‚   // Creates express app
â”‚   â”‚   // Registers middleware and routes
â”‚
â”‚   â”œâ”€â”€ server.js
â”‚   â”‚   // Starts HTTP server and WebSocket server
â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ env.js
â”‚   â”‚   â”‚   // Loads environment variables
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ db.js
â”‚   â”‚   â”‚   // Connects to MongoDB
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ redis.js
â”‚   â”‚   â”‚   // Connects to Redis
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ socket.js
â”‚   â”‚       // Configures Socket.io with Redis adapter
â”‚
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.routes.js
â”‚   â”‚   â”‚   // Login and signup endpoints
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat.routes.js
â”‚   â”‚   â”‚   // Chat message APIs
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ voice.routes.js
â”‚   â”‚   â”‚   // Voice call webhooks (Twilio/Exotel)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ business.routes.js
â”‚   â”‚   â”‚   // Business setup, FAQ upload, policies
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ analytics.routes.js
â”‚   â”‚       // Dashboard analytics APIs
â”‚
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ auth.controller.js
â”‚   â”‚   â”‚   // Handles auth request and response
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat.controller.js
â”‚   â”‚   â”‚   // Handles chat requests
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ voice.controller.js
â”‚   â”‚   â”‚   // Handles incoming voice calls
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ business.controller.js
â”‚   â”‚       // Handles business data
â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.service.js
â”‚   â”‚   â”‚   â”‚   // Calls AI model to generate response
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ embedding.service.js
â”‚   â”‚   â”‚   â”‚   // Converts text to embeddings
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ rag.service.js
â”‚   â”‚   â”‚   â”‚   // Fetches relevant business data
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ tts.service.js
â”‚   â”‚   â”‚       // Converts AI text to voice
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ voice/
â”‚   â”‚   â”‚   â”œâ”€â”€ stt.service.js
â”‚   â”‚   â”‚   â”‚   // Converts voice to text
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ call.service.js
â”‚   â”‚   â”‚       // Manages call flow
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ cache/
â”‚   â”‚   â”‚   â””â”€â”€ redis.service.js
â”‚   â”‚   â”‚       // Get/set data in Redis
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ queue/
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.queue.js
â”‚   â”‚   â”‚   â”‚   // Push AI tasks to queue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ worker.js
â”‚   â”‚   â”‚       // Processes queued AI jobs
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ socket/
â”‚   â”‚   â”‚   â””â”€â”€ socket.service.js
â”‚   â”‚   â”‚       // Emits real-time events
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ integrations/
â”‚   â”‚       â”œâ”€â”€ shopify.service.js
â”‚   â”‚       â”‚   // Shopify order integration
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ woocommerce.service.js
â”‚   â”‚           // WooCommerce order integration
â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ User.model.js
â”‚   â”‚   â”‚   // User schema
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Business.model.js
â”‚   â”‚   â”‚   // Business data schema
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Message.model.js
â”‚   â”‚   â”‚   // Chat messages schema
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Ticket.model.js
â”‚   â”‚   â”‚   // Support ticket schema
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Order.model.js
â”‚   â”‚       // Order data schema
â”‚
â”‚   â”œâ”€â”€ middlewares/
â”‚   â”‚   â”œâ”€â”€ auth.middleware.js
â”‚   â”‚   â”‚   // Protects private routes
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ rateLimit.middleware.js
â”‚   â”‚   â”‚   // Prevents abuse
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ error.middleware.js
â”‚   â”‚       // Handles errors centrally
â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ logger.js
â”‚   â”‚   â”‚   // Logs errors and info
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ constants.js
â”‚   â”‚   â”‚   // Fixed backend values
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ helpers.js
â”‚   â”‚       // Small reusable helpers
â”‚
â”‚   â””â”€â”€ jobs/
â”‚       â””â”€â”€ ai.job.js
â”‚           // Background AI job logic
â”‚
â”œâ”€â”€ .env
â”‚   // Secrets and keys
â”‚
â”œâ”€â”€ package.json
â””â”€â”€ README.md


What is Redis?
Redis keeps data that is needed right now in fast memory, used for
caching, shared memory, scaling apps
So: App does NOT go to database every time, App gets data instantly

Why database is slow
Database (MongoDB):
Stores data on disk
Reads take more time
Good for permanent storage

Redis:
Stores data in RAM
Reads are very very fast
Good for temporary data

Without Redis âŒ

User asks:
â€œWhat are your store timings?â€
App: Go to database->Read data->Send repl->This happens every time â†’ slow.

With Redis âœ…
First time: App gets answer from database->Saves it in Redis
Next time:App gets answer directly from Redis->No database call->Much faster.

Local Redis
Local Redis means Redis runs on your own computer.
Features:
No API key, No internet needed, Used for development & learning,Runs on localhost:6379

Cloud Redis

Cloud Redis means Redis runs on another server (online).
Examples:
Upstash
Redis Cloud
AWS ElastiCache
Features:
Needs URL / password
Used in production
Accessible from anywhere

Why we used Docker
Windows cannot run Redis easily.

Docker:

Runs Redis in a small container
No installation headache
Works like real server Redis

How Docker Redis works (Simple)
Docker starts Redis
Redis waits on port 6379
Your backend connects to it
Redis is ready
Command we used:
docker run -d -p 6379:6379 redis

USER FLOW: User â†’ Browser â†’ Backend â†’ Redis â†’ Backend â†’ User


Twilio
Voice Architecture (Simple View)
Phone Call
   â†“
Webhook (Twilio)
   â†“
Speech-to-Text
   â†“
Queue â†’ Worker â†’ AI
   â†“
Text-to-Speech
   â†“
Return audio to caller

Twilio and Ngrok

---

## ğŸ¯ What Are We Trying To Do?

We want this:

> ğŸ“ When someone calls your Twilio number â†’ your AI should answer.

Thatâ€™s the goal.

---

## ğŸ§  Problem

Your AI server is running here:

```
http://localhost:5000
```

But:

âŒ â€œlocalhostâ€ means **only your laptop can see it**
âŒ Twilio is on the internet
âŒ Twilio cannot see your laptop

So when someone calls, Twilio doesnâ€™t know where to send the call data.

---

## ğŸŸ¢ What Twilio Does

Twilio gives you:

* A real phone number
* When someone calls:

  * Twilio sends a request (webhook) to a URL you give it

Example:

```
https://yourdomain.com/api/voice/call
```

But you donâ€™t have a public domain yet.

---

## ğŸ”µ What ngrok Does

ngrok creates a public URL that points to your laptop.

When you run:

```
ngrok http 5000
```

It creates something like:

```
https://abcd.ngrok-free.app
```

Now:

```
Internet â†’ abcd.ngrok-free.app â†’ your laptop (port 5000)
```

So Twilio can now reach your AI.

---

## ğŸ” Full Flow (Very Simple)

1ï¸âƒ£ Someone calls your Twilio number
2ï¸âƒ£ Twilio sends call info to:

```
https://abcd.ngrok-free.app/api/voice/call
```

3ï¸âƒ£ ngrok sends that to:

```
http://localhost:5000/api/voice/call
```

4ï¸âƒ£ Your AI processes it
5ï¸âƒ£ Twilio reads the AI reply out loud

---

## ğŸ”¥ Why Both Needed?

| Tool   | Why                                |
| ------ | ---------------------------------- |
| Twilio | Gives phone number + handles voice |
| ngrok  | Makes your local server public     |

Without ngrok â†’ Twilio cannot reach your AI.

Without Twilio â†’ No phone number.

---

Twilio gives you a real phone number.

When someone calls it, Twilio needs a public URL to send the call data to.

Your AI is running on localhost (only your laptop), so Twilio canâ€™t reach it.

ngrok gives your laptop a temporary public link.


